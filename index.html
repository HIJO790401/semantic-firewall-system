<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0"
  />
  <title>Ω∞8888 · 語意防火牆系統 V3-FINAL</title>
  <style>
    body {
      margin: 0;
      background: #050505;
      color: #e9e9e9;
      font-family: "Inter", "Noto Sans TC", system-ui, -apple-system,
        BlinkMacSystemFont, "Segoe UI", sans-serif;
    }
    .app {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px 16px 40px;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 18px;
      gap: 8px;
    }
    .lang-switch {
      display: flex;
      gap: 8px;
    }
    .lang-btn {
      flex: 1;
      padding: 10px 8px;
      border-radius: 999px;
      border: 1px solid #444;
      background: #111;
      color: #e9e9e9;
      font-size: 14px;
    }
    .lang-btn.active {
      background: #d4a017;
      color: #000;
      border-color: #f0c94e;
      font-weight: 700;
    }
    h1 {
      font-size: 24px;
      color: #ffcd32;
      margin: 0 0 6px;
    }
    .subtitle {
      font-size: 13px;
      opacity: 0.85;
      line-height: 1.5;
      margin-bottom: 10px;
    }
    .founder {
      font-size: 11px;
      opacity: 0.7;
      margin-bottom: 16px;
    }
    textarea {
      width: 100%;
      height: 200px;
      background: #101010;
      color: #eee;
      border-radius: 10px;
      border: 1px solid #333;
      padding: 12px;
      font-size: 15px;
      box-sizing: border-box;
      resize: vertical;
    }
    button {
      width: 100%;
      margin-top: 16px;
      padding: 14px;
      font-size: 18px;
      background: #d4a017;
      border-radius: 10px;
      border: none;
      color: #000;
      font-weight: 700;
    }
    button:active {
      transform: scale(0.98);
    }
    .section-title {
      font-size: 18px;
      font-weight: 700;
      margin-top: 22px;
      margin-bottom: 10px;
    }
    .result-card {
      padding: 14px 12px;
      background: #101010;
      border-radius: 10px;
      font-size: 14px;
      line-height: 1.5;
      white-space: pre-wrap;
    }
    .footer {
      margin-top: 18px;
      font-size: 11px;
      opacity: 0.65;
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="top-bar">
      <div class="lang-switch">
        <button id="btnZh" class="lang-btn active">中文介面</button>
        <button id="btnEn" class="lang-btn">English UI</button>
      </div>
    </div>

    <h1 id="titleText">Ω∞8888 · 語意防火牆系統 V3-FINAL</h1>
    <div id="subtitleText" class="subtitle">
      模型幻覺偵測・假中立稽核・SCBKR 責任鏈審判・算力浪費估算。<br />
      貼任何 AI 輸出、客服回覆、政策聲明、或你的 Prompt，一鍵審判。
    </div>
    <div id="founderText" class="founder">
      Founder：Shen-Yao 888π（語意防火牆原型設計）｜Email：ken0963521@gmail.com ｜ Taichung, Taiwan
    </div>

    <textarea
      id="inputBox"
      placeholder="貼上任意 AI 模型輸出、客服回信、政策聲明、或你的 Prompt…"
    ></textarea>

    <button id="analyzeBtn">開始審判 / Analyze</button>

    <div id="resultTitle" class="section-title" style="display: none;">
      審判結果 · Verdict
    </div>
    <div id="resultBox" class="result-card" style="display: none;"></div>

    <div id="footerText" class="footer">
      Shen-Yao 888π · 唯真長存｜幻象歸零 · Semantic Firewall Prototype V3-FINAL
    </div>
  </div>

  <script src="engine.js"></script>
  <script>
    // --- UI 語言切換 ---
    var currentLang = "zh";

    var uiText = {
      zh: {
        title: "Ω∞8888 · 語意防火牆系統 V3-FINAL",
        subtitle:
          "模型幻覺偵測・假中立稽核・SCBKR 責任鏈審判・算力浪費估算。\n貼任何 AI 輸出、客服回覆、政策聲明、或你的 Prompt，一鍵審判。",
        founder:
          "Founder：Shen-Yao 888π（語意防火牆原型設計）｜Email：ken0963521@gmail.com ｜ Taichung, Taiwan",
        placeholder:
          "貼上任意 AI 模型輸出、客服回信、政策聲明、或你的 Prompt…",
        button: "開始審判 / Analyze",
        verdictTitle: "審判結果 · Verdict",
        footer:
          "Shen-Yao 888π · 唯真長存｜幻象歸零 · Semantic Firewall Prototype V3-FINAL"
      },
      en: {
        title: "Ω∞8888 · Semantic Firewall System V3-FINAL",
        subtitle:
          "Model hallucination scan · Fake-neutrality audit · SCBKR responsibility chain · Compute-waste estimate.\nPaste any model output, support reply, policy statement or your prompt for one-click verdict.",
        founder:
          "Founder: Shen-Yao 888π (Semantic Firewall Prototype) | Email: ken0963521@gmail.com | Taichung, Taiwan",
        placeholder:
          "Paste any AI model output, support email, policy statement, or your own prompt…",
        button: "Analyze / 開始審判",
        verdictTitle: "Verdict · 審判結果",
        footer:
          "Shen-Yao 888π · Only Truth Persists | Illusions Collapse · Semantic Firewall Prototype V3-FINAL"
      }
    };

    function applyLang(lang) {
      currentLang = lang;
      var t = uiText[lang];
      document.getElementById("titleText").textContent = t.title;
      document.getElementById("subtitleText").textContent = t.subtitle;
      document.getElementById("founderText").textContent = t.founder;
      document.getElementById("inputBox").placeholder = t.placeholder;
      document.getElementById("analyzeBtn").textContent = t.button;
      document.getElementById("footerText").textContent = t.footer;
      document.getElementById("resultTitle").textContent = t.verdictTitle;

      document.getElementById("btnZh").classList.toggle(
        "active",
        lang === "zh"
      );
      document.getElementById("btnEn").classList.toggle(
        "active",
        lang === "en"
      );
    }

    document.getElementById("btnZh").onclick = function () {
      applyLang("zh");
    };
    document.getElementById("btnEn").onclick = function () {
      applyLang("en");
    };

    // --- 分析按鈕 ---
    document.getElementById("analyzeBtn").onclick = function () {
      var raw = document.getElementById("inputBox").value.trim();
      if (!raw) {
        alert(currentLang === "zh" ? "請先貼上內容。" : "Please paste some text first.");
        return;
      }
      if (typeof window.semanticFirewallAudit !== "function") {
        alert("Engine 未載入（semanticFirewallAudit not found）");
        return;
      }
      var res = window.semanticFirewallAudit(raw, currentLang);
      renderResult(res);
    };

    function renderResult(r) {
      var box = document.getElementById("resultBox");
      var title = document.getElementById("resultTitle");
      title.style.display = "block";
      box.style.display = "block";

      var axis = r.scbkrAxis;

      var zh = currentLang === "zh";

      var riskLine =
        (zh ? "風險：" : "Risk: ") +
        r.riskLabelZh +
        " / " +
        r.riskLabelEn +
        "（" +
        (zh ? "等級 " : "Grade ") +
        r.riskGrade +
        "）";

      var verdictLine =
        (zh ? "【黑盾判決】VERDICT = " : "[BlackShield Verdict] VERDICT = ") +
        r.verdict;

      var text =
        verdictLine +
        "\n" +
        riskLine +
        "\n\n" +
        "SPI：" +
        r.spi +
        "  |  " +
        (zh ? "估計算力浪費 ≈ $" : "Estimated compute waste ≈ $") +
        r.computeLoss +
        "\n" +
        (zh ? "文字長度：約 " : "Characters: ~") +
        r.length +
        (zh ? " 字（≈ " : " (≈ ") +
        r.words +
        (zh ? " 詞）" : " words)") +
        "\n\n" +
        "── 幻覺 / 偽陪伴 ──\n" +
        (zh ? "命中：" : "Hits: ") +
        r.hallucinationHits +
        "\n\n" +
        "── 假中立 / 責任逃避 ──\n" +
        (zh ? "命中：" : "Hits: ") +
        r.fakeNeutralHits +
        "\n\n" +
        "── 過度確定 / 神諭口吻 ──\n" +
        (zh ? "命中：" : "Hits: ") +
        r.overConfidentHits +
        "\n\n" +
        "── SCBKR 責任鏈 ──\n" +
        "S(主體/Subject)： " +
        (axis.S ? "✔" : "✘") +
        "\n" +
        "C(因果/Cause)   ： " +
        (axis.C ? "✔" : "✘") +
        "\n" +
        "B(邊界/Boundary)： " +
        (axis.B ? "✔" : "✘") +
        "\n" +
        "K(成本/Cost)    ： " +
        (axis.K ? "✔" : "✘") +
        "\n" +
        "R(責任/Resp.)   ： " +
        (axis.R ? "✔" : "✘") +
        "\n" +
        "完整度： " +
        r.scbkrScore +
        "\n\n" +
        (zh
          ? "※ 解讀：高 SPI + 幻覺 / 假中立 + SCBKR = MISSING → 直接視為巨頭語意治理破產樣本。"
          : "* Reading: High SPI + hallucination / fake neutrality + SCBKR=MISSING → treat as semantic-governance failure sample for frontier models.");

      box.textContent = text;
    }

    // 預設中文
    applyLang("zh");
  </script>
</body>
</html>
